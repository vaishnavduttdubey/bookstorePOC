"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["776"],{429:function(e,t,o){o.r(t),o.d(t,{OAuthConsent:()=>C,OAuthConsentInternal:()=>y});var r=o(3312),n=o(851),l=o(9144),i=o(1576),a=o(4204),c=o(3174),s=o(2418),d=o(2672),h=o(2654),u=o(6459),p=o(9732),b=o(4174),Z=o(215),x=o(1217),g=o(5407);function y(){let{scopes:e,oAuthApplicationName:t,oAuthApplicationLogoUrl:o,oAuthApplicationUrl:d,redirectUrl:u,onDeny:b,onAllow:y}=(0,i.useOAuthConsentContext)(),{user:C}=(0,n.aF)(),{applicationName:w,logoImageUrl:R}=(0,i.useEnvironment)().displayConfig,[S,A]=(0,l.useState)(!1),T=C?.emailAddresses.find(e=>e.id===C.primaryEmailAddress?.id);function X(){try{let{hostname:e}=new URL(u);return e.split(".").slice(-2).join(".")}catch{return""}}return(0,r.BX)(a.Flow.Root,{flow:"oauthConsent",children:[(0,r.BX)(s.Z.Root,{children:[(0,r.BX)(s.Z.Content,{children:[(0,r.BX)(h.h.Root,{children:[o&&R&&(0,r.BX)(f,{children:[(0,r.tZ)(m,{justify:"end",children:(0,r.tZ)(c.u,{src:o,alt:t,href:d,isExternal:!0})}),(0,r.tZ)(k,{}),(0,r.tZ)(m,{justify:"start",children:(0,r.tZ)(c.u,{})})]}),o&&!R&&(0,r.tZ)(f,{children:(0,r.BX)(a.Box,{sx:{position:"relative"},children:[(0,r.tZ)(c.u,{src:o,alt:t,href:d,isExternal:!0}),(0,r.tZ)(B,{size:"sm",sx:e=>({position:"absolute",bottom:`calc(${e.space.$3} * -1)`,right:`calc(${e.space.$3} * -1)`})})]})}),!o&&R&&(0,r.BX)(f,{children:[(0,r.tZ)(m,{justify:"end",children:(0,r.tZ)(B,{})}),(0,r.tZ)(k,{}),(0,r.tZ)(m,{justify:"start",children:(0,r.tZ)(c.u,{})})]}),!o&&!R&&(0,r.tZ)(f,{children:(0,r.tZ)(B,{})}),(0,r.tZ)(h.h.Title,{localizationKey:t}),(0,r.tZ)(h.h.Subtitle,{localizationKey:`wants to access ${w} on behalf of ${T}`})]}),(0,r.BX)(a.Box,{sx:e=>({textAlign:"left",borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$borderAlpha100,borderRadius:e.radii.$lg,overflow:"hidden"}),children:[(0,r.tZ)(a.Box,{sx:e=>({padding:e.space.$3,background:x.common.mergedColorsBackground(g.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50)}),children:(0,r.tZ)(a.Text,{variant:"subtitle",localizationKey:`This will allow ${t} access to:`})}),(0,r.tZ)(a.Box,{as:"ul",sx:e=>({margin:e.sizes.$none,padding:e.sizes.$none}),children:(e||[]).map(e=>(0,r.tZ)(a.Box,{sx:e=>({display:"flex",alignItems:"baseline",paddingInline:e.space.$3,paddingBlock:e.space.$2,borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$borderAlpha100,"&::before":{content:'""',display:"inline-block",width:e.space.$1,height:e.space.$1,background:e.colors.$colorMutedForeground,borderRadius:e.radii.$circle,transform:"translateY(-0.1875rem)",marginRight:e.space.$2,flexShrink:0}}),as:"li",children:(0,r.tZ)(a.Text,{variant:"subtitle",localizationKey:e.description||e.scope||""})},e.scope))})]}),(0,r.tZ)(Z.bZ,{colorScheme:"warning",children:(0,r.BX)(a.Text,{colorScheme:"warning",variant:"caption",children:["Make sure that you trust ",t," ","",(0,r.BX)(p.u.Root,{children:[(0,r.tZ)(p.u.Trigger,{children:(0,r.BX)(a.Text,{as:"span",role:"button",tabIndex:0,"aria-label":"View full URL",variant:"caption",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"pointer",outline:"none",display:"inline-block"},onClick:()=>A(!0),children:["(",X(),")"]})}),(0,r.tZ)(p.u.Content,{text:"View full URL"})]}),"",". You may be sharing sensitive data with this site or app."]})}),(0,r.BX)(a.Grid,{columns:2,gap:3,children:[(0,r.tZ)(a.Button,{colorScheme:"secondary",variant:"outline",localizationKey:"Deny",onClick:b}),(0,r.tZ)(a.Button,{localizationKey:"Allow",onClick:y}),(0,r.BX)(a.Text,{sx:{gridColumn:"span 2"},colorScheme:"secondary",variant:"caption",children:["If you allow access, this app will redirect you to"," ",(0,r.BX)(p.u.Root,{children:[(0,r.tZ)(p.u.Trigger,{children:(0,r.tZ)(a.Text,{as:"span",role:"button",tabIndex:0,"aria-label":"View full URL",variant:"caption",sx:{textDecoration:"underline",textDecorationStyle:"dotted",cursor:"pointer",outline:"none",display:"inline-block"},onClick:()=>A(!0),children:X()})}),(0,r.tZ)(p.u.Content,{text:"View full URL"})]})]})]})]}),(0,r.tZ)(s.Z.Footer,{})]}),(0,r.tZ)($,{isOpen:S,onOpen:()=>A(!0),onClose:()=>A(!1),redirectUri:u,oAuthApplicationName:t})]})}function $({onOpen:e,onClose:t,isOpen:o,redirectUri:n,oAuthApplicationName:l}){return o?(0,r.tZ)(u.Modal,{handleOpen:e,handleClose:t,children:(0,r.tZ)(s.Z.Root,{children:(0,r.BX)(s.Z.Content,{children:[(0,r.BX)(h.h.Root,{children:[(0,r.tZ)(h.h.Title,{localizationKey:"Redirect URL"}),(0,r.tZ)(h.h.Subtitle,{localizationKey:`Make sure you trust ${l} and that this URL belongs to ${l}.`})]}),(0,r.tZ)(Z.gx,{style:{maxHeight:"none"},cols:50,rows:6,defaultValue:n,readOnly:!0})]})})}):null}function f({children:e}){return(0,r.tZ)(a.Flex,{justify:"center",align:"center",gap:4,sx:e=>({marginBlockEnd:e.space.$6}),children:e})}function m({children:e,sx:t,...o}){return(0,r.tZ)(a.Flex,{...o,sx:[{flex:1},t],children:e})}function B({size:e="md",sx:t}){let o=t=>{let o="sm"===e?t.space.$6:t.space.$12;return{width:o,height:o}};return(0,r.tZ)(a.Box,{sx:e=>[{background:x.common.mergedColorsBackground(g.O9.setAlpha(e.colors.$colorBackground,1),e.colors.$neutralAlpha50),borderRadius:e.radii.$circle,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$borderAlpha100,display:"flex",alignItems:"center",justifyContent:"center"},o,t],children:(0,r.tZ)(a.Icon,{icon:b.LG,sx:e=>({color:e.colors.$primary500})})})}function k(){return(0,r.tZ)(a.Box,{as:"svg",fill:"none",viewBox:"0 0 16 2",height:2,"aria-hidden":!0,sx:e=>({color:e.colors.$colorMutedForeground}),children:(0,r.tZ)("path",{stroke:"currentColor",strokeDasharray:"0.1 4",strokeLinecap:"round",strokeWidth:"2",d:"M1 1h14"})})}let C=(0,d.withCardStateProvider)(y)}}]);
<header class="header">
  <div class="top-bar">
    <!-- LOGO -->
    <a routerLink="/home">
      <img src="assets/logo.png" alt="VSNV Logo" class="logo" />
    </a>

    <!-- SEARCH BOX -->
    <div class="search-box">
      <!-- Input -->
      <input
        type="text"
        placeholder="Search by title, author or categories"
        [(ngModel)]="searchText"
        (input)="onInputChange($event)"
        (blur)="hideSuggestions()"
        autocomplete="off"
        class="search-input"
      />

      <button class="search-btn" type="button" aria-label="Search">
        <i class="fa fa-search"></i>
      </button>

      <!-- Suggestions Dropdown (only when showSuggestions true) -->
      <div *ngIf="showSuggestions" class="suggestions-box" role="listbox">
        <!-- If no suggestions we show "No results" (defensive) -->
        <div *ngIf="suggestions.length === 0" class="no-results">
          No results found
        </div>

        <!-- Suggestion items -->
        <ul>
          <li
            *ngFor="let book of suggestions; let i = index"
            (click)="selectSuggestion(book)"
            [class.active]="i === selectedIndex"
            role="option"
            [attr.aria-selected]="i === selectedIndex"
          >
            <!-- Highlight matched text in title -->
            <span class="book-title" [innerHTML]="highlight(book.title)"></span>
            <span class="book-author">by {{ book.author }}</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- HEADER ICONS -->
    <div class="header-icons">
      <a routerLink="/login">
        <i class="fa-regular fa-circle-user"></i> My Account
      </a>

      <a routerLink="/addTocart" class="icon-wrapper cart-container">
        <i class="fa fa-shopping-cart" *ngIf="cartCount > 0"></i>
        <span class="cart-count">{{ cartCount }}</span>
      </a>

      <a routerLink="/home" class="icon-wrapper">
        <i class="fa fa-home"></i>
      </a>
    </div>
  </div>

  <!-- NAVIGATION BAR -->
  <nav class="nav-menu">
    <ul class="nav-list">
      <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle"
          href="#"
          id="booksDropdown"
          role="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Books
        </a>

        <ul class="dropdown-menu" aria-labelledby="booksDropdown">
          <li>
            <a class="dropdown-item" routerLink="/category/Sports">Sports</a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="/category/Comedy">Comedy</a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="/category/Marvel">Marvel</a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="/category/Horror">Horror</a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="/category/Children"
              >Children's Books</a
            >
          </li>
        </ul>
      </li>

      <li><a routerLink="/arrival">New Arrivals</a></li>
      <li><a routerLink="/box-set">Box Sets</a></li>
      <li><a routerLink="/bestseller">Bestsellers</a></li>
      <li><a routerLink="/fiction-books">Fiction Books</a></li>
      <li><a routerLink="/awardwinner">Award Winners</a></li>
      <li><a routerLink="/todaysdeal">Today's Deal</a></li>
      <li><a routerLink="/requestbook">Request a Book</a></li>
    </ul>
  </nav>
</header>
